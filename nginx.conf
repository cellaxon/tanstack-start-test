server {
  listen 80;
  server_name localhost;

  # 정적 파일이 위치할 디렉토리
  root /usr/share/nginx/html;

  # 요청이 들어왔을 때 index.html을 찾도록 설정
  index index.html index.htm;

  location / {
    # 중요한 부분: try_files를 사용하여 SPA 라우팅 처리
    # 1. 먼저 요청된 URI와 일치하는 파일($uri)을 찾습니다.
    # 2. 파일이 없으면 URI와 일치하는 디렉토리($uri/)를 찾습니다.
    # 3. 위 두 가지 모두 없으면, /index.html로 폴백(fallback)하여 SPA 라우팅을 Nginx가 아닌 React가 처리하도록 합니다.
    try_files $uri $uri/ /index.html;
  }

  # gzip 압축으로 파일 전송 성능 향상
  gzip on;
  gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
  gzip_proxied any;
}
